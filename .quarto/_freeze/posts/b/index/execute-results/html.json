{
  "hash": "3dcbca93a95eb77a84ed33b8f5621dea",
  "result": {
    "markdown": "---\ntitle: \"Data conversion and sorting\"\nauthor: \"Sreekanya Peddireddi\"\ndate: \"2023-12-06\"\ncategories: [news, code, analysis,plotly,plot]\nimage: \"b.jpg\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load necessary packages\nlibrary(tm)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tm' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: NLP\n```\n:::\n\n```{.r .cell-code}\nlibrary(SnowballC)\n\n# Create a sample dataframe with medical content\nmedical_data <- data.frame(\n  PatientID = c(1, 2, 3),\n  Text = c(\n    \"The patient presented with symptoms of persistent cough and shortness of breath. Chest X-ray revealed bilateral infiltrates.\",\n    \"After conducting a thorough examination, the physician diagnosed the patient with hypertension and prescribed antihypertensive medication.\",\n    \"The laboratory results indicated elevated levels of cholesterol and triglycerides. Dietary recommendations were provided to manage the lipid profile.\"\n  ),\n  stringsAsFactors = FALSE\n)\n\n# Create a Corpus (text document) from the Text column\ncorpus <- Corpus(VectorSource(medical_data$Text))\n\n# Perform text preprocessing (removing punctuation, converting to lowercase, stemming)\ncorpus <- tm_map(corpus, content_transformer(tolower))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in tm_map.SimpleCorpus(corpus, content_transformer(tolower)):\ntransformation drops documents\n```\n:::\n\n```{.r .cell-code}\ncorpus <- tm_map(corpus, removePunctuation)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in tm_map.SimpleCorpus(corpus, removePunctuation): transformation drops\ndocuments\n```\n:::\n\n```{.r .cell-code}\ncorpus <- tm_map(corpus, removeNumbers)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in tm_map.SimpleCorpus(corpus, removeNumbers): transformation drops\ndocuments\n```\n:::\n\n```{.r .cell-code}\ncorpus <- tm_map(corpus, removeWords, stopwords(\"en\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in tm_map.SimpleCorpus(corpus, removeWords, stopwords(\"en\")):\ntransformation drops documents\n```\n:::\n\n```{.r .cell-code}\ncorpus <- tm_map(corpus, stemDocument)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in tm_map.SimpleCorpus(corpus, stemDocument): transformation drops\ndocuments\n```\n:::\n\n```{.r .cell-code}\n# Create a Document-Term Matrix (DTM)\ndtm <- DocumentTermMatrix(corpus)\n\n# Convert DTM to a data frame\ndtm_df <- as.data.frame(as.matrix(dtm))\ndtm_df$PatientID <- medical_data$PatientID\n\n# Display the resulting data frame\nprint(dtm_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  bilater breath chest cough infiltr patient persist present reveal short\n1       1      1     1     1       1       1       1       1      1     1\n2       0      0     0     0       0       1       0       0      0     0\n3       0      0     0     0       0       0       0       0      0     0\n  symptom xray antihypertens conduct diagnos examin hypertens medic physician\n1       1    1             0       0       0      0         0     0         0\n2       0    0             1       1       1      1         1     1         1\n3       0    0             0       0       0      0         0     0         0\n  prescrib thorough cholesterol dietari elev indic laboratori level lipid manag\n1        0        0           0       0    0     0          0     0     0     0\n2        1        1           0       0    0     0          0     0     0     0\n3        0        0           1       1    1     1          1     1     1     1\n  profil provid recommend result triglycerid PatientID\n1      0      0         0      0           0         1\n2      0      0         0      0           0         2\n3      1      1         1      1           1         3\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tidyverse' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggplot2' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'readr' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dplyr' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'forcats' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'lubridate' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ ggplot2::annotate() masks NLP::annotate()\n✖ dplyr::filter()     masks stats::filter()\n✖ dplyr::lag()        masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\n# EDA on the Document-Term Matrix (dtm_df)\n# Summary statistics\nsummary(dtm_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    bilater           breath           chest            cough       \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.3333   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n    infiltr          patient          persist          present      \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.5000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :1.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.6667   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:1.0000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n     reveal           short           symptom            xray       \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.3333   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n antihypertens       conduct          diagnos           examin      \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.3333   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n   hypertens          medic          physician         prescrib     \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.3333   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n    thorough       cholesterol        dietari            elev       \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.3333   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n     indic          laboratori         level            lipid       \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.3333   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n     manag            profil           provid         recommend     \n Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  \n Mean   :0.3333   Mean   :0.3333   Mean   :0.3333   Mean   :0.3333  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:0.5000  \n Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n     result        triglycerid       PatientID  \n Min.   :0.0000   Min.   :0.0000   Min.   :1.0  \n 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:1.5  \n Median :0.0000   Median :0.0000   Median :2.0  \n Mean   :0.3333   Mean   :0.3333   Mean   :2.0  \n 3rd Qu.:0.5000   3rd Qu.:0.5000   3rd Qu.:2.5  \n Max.   :1.0000   Max.   :1.0000   Max.   :3.0  \n```\n:::\n\n```{.r .cell-code}\n# Check the structure of the data\nstr(dtm_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t3 obs. of  35 variables:\n $ bilater      : num  1 0 0\n $ breath       : num  1 0 0\n $ chest        : num  1 0 0\n $ cough        : num  1 0 0\n $ infiltr      : num  1 0 0\n $ patient      : num  1 1 0\n $ persist      : num  1 0 0\n $ present      : num  1 0 0\n $ reveal       : num  1 0 0\n $ short        : num  1 0 0\n $ symptom      : num  1 0 0\n $ xray         : num  1 0 0\n $ antihypertens: num  0 1 0\n $ conduct      : num  0 1 0\n $ diagnos      : num  0 1 0\n $ examin       : num  0 1 0\n $ hypertens    : num  0 1 0\n $ medic        : num  0 1 0\n $ physician    : num  0 1 0\n $ prescrib     : num  0 1 0\n $ thorough     : num  0 1 0\n $ cholesterol  : num  0 0 1\n $ dietari      : num  0 0 1\n $ elev         : num  0 0 1\n $ indic        : num  0 0 1\n $ laboratori   : num  0 0 1\n $ level        : num  0 0 1\n $ lipid        : num  0 0 1\n $ manag        : num  0 0 1\n $ profil       : num  0 0 1\n $ provid       : num  0 0 1\n $ recommend    : num  0 0 1\n $ result       : num  0 0 1\n $ triglycerid  : num  0 0 1\n $ PatientID    : num  1 2 3\n```\n:::\n\n```{.r .cell-code}\n# Check for missing values\nsum(is.na(dtm_df))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n\n```{.r .cell-code}\n# Check variable names\ncolnames(dtm_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"bilater\"       \"breath\"        \"chest\"         \"cough\"        \n [5] \"infiltr\"       \"patient\"       \"persist\"       \"present\"      \n [9] \"reveal\"        \"short\"         \"symptom\"       \"xray\"         \n[13] \"antihypertens\" \"conduct\"       \"diagnos\"       \"examin\"       \n[17] \"hypertens\"     \"medic\"         \"physician\"     \"prescrib\"     \n[21] \"thorough\"      \"cholesterol\"   \"dietari\"       \"elev\"         \n[25] \"indic\"         \"laboratori\"    \"level\"         \"lipid\"        \n[29] \"manag\"         \"profil\"        \"provid\"        \"recommend\"    \n[33] \"result\"        \"triglycerid\"   \"PatientID\"    \n```\n:::\n\n```{.r .cell-code}\n# Display the first few rows of the data\nhead(dtm_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  bilater breath chest cough infiltr patient persist present reveal short\n1       1      1     1     1       1       1       1       1      1     1\n2       0      0     0     0       0       1       0       0      0     0\n3       0      0     0     0       0       0       0       0      0     0\n  symptom xray antihypertens conduct diagnos examin hypertens medic physician\n1       1    1             0       0       0      0         0     0         0\n2       0    0             1       1       1      1         1     1         1\n3       0    0             0       0       0      0         0     0         0\n  prescrib thorough cholesterol dietari elev indic laboratori level lipid manag\n1        0        0           0       0    0     0          0     0     0     0\n2        1        1           0       0    0     0          0     0     0     0\n3        0        0           1       1    1     1          1     1     1     1\n  profil provid recommend result triglycerid PatientID\n1      0      0         0      0           0         1\n2      0      0         0      0           0         2\n3      1      1         1      1           1         3\n```\n:::\n\n```{.r .cell-code}\n# Visualize the distribution of PatientID\nggplot(dtm_df, aes(x = PatientID)) +\n  geom_bar(fill = \"blue\", alpha = 0.7) +\n  labs(title = \"Distribution of PatientID\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Visualize the most common terms\nterm_freq <- colSums(dtm_df[, -ncol(dtm_df)])\nterm_freq_df <- data.frame(Term = names(term_freq), Frequency = term_freq)\nterm_freq_df <- term_freq_df[order(-term_freq_df$Frequency), ]\n\n# Plot the top N terms\ntop_n_terms <- 10\nggplot(head(term_freq_df, top_n_terms), aes(x = reorder(Term, Frequency), y = Frequency)) +\n  geom_bar(stat = \"identity\", fill = \"green\", alpha = 0.7) +\n  labs(title = paste(\"Top\", top_n_terms, \"Terms\"), x = \"Term\", y = \"Frequency\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}